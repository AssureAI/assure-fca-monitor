ruleset_id: assure-cobs-suitability-core
version: "0.1"
description: >
  Deterministic evidence checker for FCA COBS suitability expectations.
  Flags absence or weakness of explicit written evidence.
  Does not assess advice quality.

rules:

# --------------------------------------------------
# COBS 9 – CLIENT OBJECTIVES
# --------------------------------------------------

- id: COBS9_OBJECTIVES_PRESENT
  section: "Suitability (COBS 9)"
  title: "Client investment objectives explicitly stated"
  citation: "COBS 9.2.2R"
  question: >
    Does the report explicitly state the client’s investment objectives?

  applies_when:
    advice_type: advised

  evidence:
    any_phrases:
      - "your objectives"
      - "investment objectives"
      - "financial objectives"
      - "your goals"
      - "aim to achieve"

  thresholds:
    ok_if_hits_gte: 1
    partial_if_hits_gte: 0

  output:
    ok: "Explicit investment objectives stated"
    potential_issue: "No clear statement of client investment objectives"

# --------------------------------------------------
# COBS 9 – ATTITUDE TO RISK
# --------------------------------------------------

- id: COBS9_RISK_ATTITUDE
  section: "Suitability (COBS 9)"
  title: "Client attitude to risk evidenced"
  citation: "COBS 9.2.2R"
  question: >
    Does the report explicitly describe the client’s attitude to risk?

  applies_when:
    advice_type: advised

  evidence:
    any_phrases:
      - "attitude to risk"
      - "risk profile"
      - "risk tolerance"
      - "risk questionnaire"
      - "risk category"

  thresholds:
    ok_if_hits_gte: 1

  output:
    ok: "Client attitude to risk explicitly evidenced"
    potential_issue: "Attitude to risk not clearly evidenced"

# --------------------------------------------------
# COBS 9 – CAPACITY FOR LOSS
# --------------------------------------------------

- id: COBS9_CAPACITY_FOR_LOSS
  section: "Suitability (COBS 9)"
  title: "Capacity for loss considered"
  citation: "COBS 9.2.2R(3)"
  question: >
    Does the report explicitly consider the client’s capacity for loss?

  applies_when:
    advice_type: advised

  evidence:
    any_phrases:
      - "capacity for loss"
      - "ability to absorb losses"
      - "impact of loss"
      - "afford to lose"

  thresholds:
    ok_if_hits_gte: 1

  output:
    ok: "Capacity for loss explicitly addressed"
    potential_issue: "Capacity for loss not explicitly evidenced"

# --------------------------------------------------
# COBS 9 – LINKAGE (OBJECTIVES ↔ RECOMMENDATION)
# --------------------------------------------------

- id: COBS9_LINKAGE_OBJECTIVES
  section: "Suitability (COBS 9)"
  title: "Recommendation linked to objectives and risk"
  citation: "COBS 9.2.2R"
  question: >
    Does the report explicitly link the recommendation back to objectives and risk?

  applies_when:
    advice_type: advised

  evidence:
    co_occurrence:
      must_contain_all:
        - "recommend"
        - "objectives"
      window_sentences: 2

  thresholds:
    ok_if_hits_gte: 1

  output:
    ok: "Recommendation explicitly linked to objectives and risk"
    potential_issue: "Recommendation not clearly linked to objectives and risk"

# --------------------------------------------------
# COBS 6 – COSTS AND CHARGES
# --------------------------------------------------

- id: COBS6_COSTS_DISCLOSURE
  section: "Costs and Charges (COBS 6)"
  title: "Costs and charges disclosed"
  citation: "COBS 6.1ZA"
  question: >
    Does the report explicitly disclose costs and charges?

  applies_when:
    investment_element: true

  evidence:
    any_phrases:
      - "fees"
      - "charges"
      - "costs"
      - "ongoing charge"
      - "initial charge"
      - "% per annum"

  thresholds:
    ok_if_hits_gte: 1

  output:
    ok: "Costs and charges explicitly disclosed"
    potential_issue: "Costs and charges not clearly disclosed"
